{
  "hash": "4bbf92be87cf96d9152879916d74bc69",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"plotnine chart\"\nexecute:\n  warning: false\n  error: false\n  eval: false\nformat:\n  html:\n    toc: true\n    toc-location: right\n    code-fold: show\n    code-tools: true\n    number-sections: true\n    code-block-bg: true\n    code-block-border-left: \"#31BAE9\"\n---\n\n![](images/logo-540.png){width=\"300\"}\n\nplotnine is an implementation of a grammar of graphics in Python based on ggplot2.\n\n::: {#98e04fd7 .cell execution_count=1}\n``` {.python .cell-code}\nimport plotnine\nprint(plotnine.__version__)\n```\n:::\n\n\n::: {#5d2535d8 .cell execution_count=2}\n``` {.python .cell-code}\nfrom plotnine import *\n\nprint(plotnine.__version__)\n```\n:::\n\n\n::: {#e16145ed .cell execution_count=3}\n``` {.python .cell-code}\nfrom plotnine import *\nimport seaborn as sns\nimport pandas as pd\n\n\n# Apply the default theme\n\n\n# Load an example dataset\ntips = sns.load_dataset(\"tips\")\ntips.head()\n```\n:::\n\n\n# Scatter Plot\n\n::: {#bbd0a2d0 .cell execution_count=4}\n``` {.python .cell-code}\np=(\n    ggplot(data=tips)+aes(x=\"tip\",y=\"total_bill\")+ geom_point()\n)\n\np\n```\n:::\n\n\n## color by group\n\n::: {#e414702b .cell execution_count=5}\n``` {.python .cell-code}\np=(\n    ggplot(data=tips)+aes(x=\"tip\",y=\"total_bill\")+ geom_point(aes(color=\"sex\"))\n)\n\np\n```\n:::\n\n\n## size by group\n\n::: {#f939a59e .cell execution_count=6}\n``` {.python .cell-code}\np=(\n    ggplot(data=tips)+aes(x=\"tip\",y=\"total_bill\",size=\"size\")+ geom_point()\n)\n\np\n```\n:::\n\n\n# line Plot\n\n::: {#77a0c6f4 .cell execution_count=7}\n``` {.python .cell-code}\ndowjones= sns.load_dataset(\"dowjones\")\ndowjones.head()\n```\n:::\n\n\n::: {#e21b0f21 .cell execution_count=8}\n``` {.python .cell-code}\np=(\n    ggplot(data=dowjones)+aes(x=\"Date\",y=\"Price\")+ geom_line()\n)\n\np\n```\n:::\n\n\n::: {#5e691810 .cell execution_count=9}\n``` {.python .cell-code code-fold=\"true\"}\nimport random\nfrom siuba import _, mutate, filter, group_by, summarize,show_query\nfrom siuba import *\n\ndowjones2=dowjones>>mutate(type='old')\n\ndowjones3=dowjones>>mutate(Price=_.Price+random.random()*200,type='new')\n\ndowjones4=pd.concat([dowjones2, dowjones3], ignore_index = True)>> arrange(_.Date)\n```\n:::\n\n\n::: {#e9f263e8 .cell execution_count=10}\n``` {.python .cell-code}\ndowjones4.head()\n```\n:::\n\n\n## color by group\n\n::: {#b805560b .cell execution_count=11}\n``` {.python .cell-code}\np=(\n    ggplot(data=dowjones4)+aes(x=\"Date\",y=\"Price\")+ geom_line(aes(color=\"type\"))\n)\n\np\n```\n:::\n\n\n# histogram\n\n::: {#fbdb1ecc .cell execution_count=12}\n``` {.python .cell-code}\np=(\n    ggplot(data=tips)+aes(x=\"tip\")+ geom_histogram()\n)\n\np\n```\n:::\n\n\n## color by group\n\n::: {#c3dea65f .cell execution_count=13}\n``` {.python .cell-code}\np=(\n    ggplot(data=tips)+aes(x=\"tip\",fill = 'sex')+ geom_histogram(position = 'dodge')\n)\n\np\n```\n:::\n\n\n# bar chart\n\n::: {#62a2f221 .cell execution_count=14}\n``` {.python .cell-code}\np=(\n    ggplot(data=tips)+aes(x='sex',y='tip',fill=\"sex\")+geom_col()\n)\n\np\n```\n:::\n\n\n# box plot\n\n::: {#302dbf6d .cell execution_count=15}\n``` {.python .cell-code}\np=(\n    ggplot(data=tips)+aes(x='day',y='tip',fill=\"day\")+geom_boxplot()\n)\n\np\n```\n:::\n\n\n## color by group\n\n::: {#88d5a630 .cell execution_count=16}\n``` {.python .cell-code}\np=(\n    ggplot(data=tips)+aes(x='day',y='tip',fill=\"sex\")+geom_boxplot()\n)\n\np\n```\n:::\n\n\n# strip plot\n\n::: {#92083cc6 .cell execution_count=17}\n``` {.python .cell-code}\np=(\n    ggplot(data=tips)+aes(x='day',y='tip')+geom_jitter(width=0.1)\n)\n\np\n```\n:::\n\n\n## color by group\n\n::: {#e203bd4c .cell execution_count=18}\n``` {.python .cell-code}\np=(\n    ggplot(data=tips)+aes(x='day',y='tip',fill=\"sex\")+geom_jitter(position=position_jitterdodge())\n)\n\np\n```\n:::\n\n\n# Facet plot\n\n::: {#703f09a2 .cell execution_count=19}\n``` {.python .cell-code}\np=(\n    ggplot(data=tips)+aes(x=\"tip\",y=\"total_bill\")+ geom_point(aes(color=\"sex\"))\n    + facet_wrap(\"day\")\n)\n\np\n```\n:::\n\n\nmake 3 plot per row\n\n::: {#74e98935 .cell execution_count=20}\n``` {.python .cell-code}\np=(\n    ggplot(data=tips)+aes(x=\"tip\",y=\"total_bill\")+ geom_point(aes(color=\"sex\"))\n    + facet_wrap(\"day\",ncol = 3)\n)\n\np\n```\n:::\n\n\n# title,size, x y names\n\n## add title\n\n::: {#a1a6766d .cell execution_count=21}\n``` {.python .cell-code}\np=(\n    ggplot(data=tips)+aes(x=\"tip\",fill = 'sex')+ geom_histogram(position = 'dodge')+ ggtitle(\"tip by sex\")\n)\n\np\n```\n:::\n\n\n## adjust size\n\n::: {#9da84781 .cell execution_count=22}\n``` {.python .cell-code}\np=(\n    ggplot(data=tips)+aes(x=\"tip\",fill = 'sex')+ geom_histogram(position = 'dodge')+ ggtitle(\"tip by sex\")+ theme(figure_size=(4, 3)) \n)\n\np\n```\n:::\n\n\n## change x y name\n\n::: {#2d0ef13b .cell execution_count=23}\n``` {.python .cell-code}\np=(\n    ggplot(data=tips)+aes(x=\"tip\",y=\"total_bill\")+ geom_point()+ scale_x_continuous(name=\"new x name\")+ scale_y_continuous(name=\"new y name\")\n)\n\np\n\n```\n:::\n\n\n# applying themes\n\nfind all build in themes in https://github.com/has2k1/plotnine/tree/main/plotnine/themes\n\n::: {.panel-tabset .nav-pills}\n\n## xkcd\n\n::: {#1d3600ed .cell execution_count=24}\n``` {.python .cell-code}\np=(\n    ggplot(data=tips)+aes(x=\"tip\",fill = 'sex')+ geom_histogram(position = 'dodge')+ theme_xkcd()\n)\n\np\n```\n:::\n\n\n## theme_538\n\n::: {#4a5a2713 .cell execution_count=25}\n``` {.python .cell-code}\np=(\n    ggplot(data=tips)+aes(x=\"tip\",fill = 'sex')+ geom_histogram(position = 'dodge')+ theme_538()\n)\n\np\n```\n:::\n\n\n## theme_dark\n\n::: {#fd22223e .cell execution_count=26}\n``` {.python .cell-code}\np=(\n    ggplot(data=tips)+aes(x=\"tip\",fill = 'sex')+ geom_histogram(position = 'dodge')+ theme_dark()\n)\n\np\n```\n:::\n\n\n::: \n\n# Save plot\n\n::: {#8bef49f6 .cell execution_count=27}\n``` {.python .cell-code}\np=(\n    ggplot(data=tips)+aes(x=\"tip\",fill = 'sex')+ geom_histogram(position = 'dodge')+ theme_dark()\n)\n\np.save(filename = 'test3.png')\n```\n:::\n\n\n# Animation plot\n\n::: {#86ad47df .cell execution_count=28}\n``` {.python .cell-code}\nfrom plotnine.animation import PlotnineAnimation\n```\n:::\n\n\n::: {#8676f26f .cell execution_count=29}\n``` {.python .cell-code}\nnew_data=dowjones4.sample(50, random_state=42)\n\nnew_data=new_data.sort_values(by=['Date'], ascending=True)\n\n#write a function that creates all the plots\ndef plot(x):\n    df2 = dowjones4.query('Date <= @x')\n\n    p = (ggplot(df2,\n               aes(x = 'Date', y = 'Price'))\n         + geom_line(aes(color=\"type\"))\n         # Specify the limits for the x and y aesthetics\n         #+ scale_x_continuous(limits=(dowjones4.Date.min(), dowjones4.Date.max()))\n         #+ scale_y_continuous(limits=(dowjones4.Price.min(), dowjones4.Price.max()))\n         + theme(subplots_adjust={'right': 0.85}) # Make space for the legend\n        )\n    return(p)\n\n\nplots = (plot(i) for i in (new_data[\"Date\"]))\n\n```\n:::\n\n\n::: {#d5db5047 .cell execution_count=30}\n``` {.python .cell-code}\nfrom matplotlib import rc\n\nrc(\"animation\", html=\"html5\")\n\n#create the animation\nanimation = PlotnineAnimation(plots, interval=300, repeat_delay=500)\nanimation\n```\n:::\n\n\n# reference:\n\nhttps://plotnine.org/\n\n",
    "supporting": [
      "2 plotnine_files"
    ],
    "filters": [],
    "includes": {}
  }
}